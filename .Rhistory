date_data <- "2015-08-01"
##############################################################################
df = readWorksheet(wb, sheet = "FPT", header = TRUE)
str(df)
# clean up the work space
remove(wb)
wb = loadWorkbook("./data/26AUG15_F2_to_node_PRA_aug_14_to_july_15.xlsx")
install.packages('xgboost')
install.packages('xgboost')
install.packages('dismo')
install.packages('gbm')
setwd("~/Desktop/6FEB15 radio releases")
library(XLConnect)
library(dplyr)
library(ggplot2)
library(lubridate)
df_csv <- read.csv("./data/RadioReleaseOverview.csv", header = FALSE,
stringsAsFactors = FALSE)
names(df_csv) <- c('model', 'krc', 'release', 'pra')
df2 <- df_csv[, 1:4]
df2 <- df_csv[, c(1,4)]
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS', 0)))
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other')))))
df2 <- df_csv[, c(1,4)]
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other')))))
hist(df2$model)
plot(df2$type)
hist(df2$type)
plot(df2$pra)
plot(data=df2, x=PRA)
plot(df2$pra)
plot(data = df2, x = pra)
plot(data = df2, x = as.numeric(pra))
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_line()
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point()
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point() +
geom_jitter()
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point() +
geom_jitter(alpha = 0.3)
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point() +
geom_jitter(alpha = 0.3) +
geom_violin()
p1
p1 <- ggplot(df2, aes(x = pra, y = n())) +
geom_bar()
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point() +
geom_jitter(alpha = 0.3) +
geom_violin()
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point() +
geom_jitter(alpha = 0.3) +
geom_violin()
p1
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type))
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point() +
geom_jitter(alpha = 0.3) +
geom_violin()
p1
hist(df2$type)
plot(df2$pra)
p1 <- ggplot(df2, aes(x = pra))
p1
p1 <- ggplot(df2, aes(x = pra)) +
geom_point()
p1
p1 <- ggplot(df2, aes(x = pra, y = type)) +
geom_point()
p1
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type))
df2 <- df_csv[, c(1,4)]
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type))
df2 <- df_csv[, c(1,4)]
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit()
p1 <- ggplot(data = df2, aes(x = pra, y = count(type))) +
geom_bar()
p1
p1 <- ggplot(data = df2, aes(x = pra, y = count(type))) +
geom_histogram()
p1
plot(df2$type)
plot(data = df2, x = pra, y = n())
plot(df2$pra)
plot(df2$type)
boxplot(df2$type)
boxplot(pra ~ type, data = df2)
plot(df2$pra, df2$model, type = 'n')
plot(df2$pra, df2$model)
plot(df2$type)
plot(df2$pra)
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit()
df2 <- df_csv[, c(1,4)]
df2 <- df2 %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit()
plot(df2$type)
boxplot(pra ~ type, data = df2)
plot(df2$pra)
plot(df2$type)
boxplot(pra ~ type, data = df2)
plot(df2$pra)
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit()
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit()
library(XLConnect)
library(dplyr)
library(ggplot2)
library(lubridate)
## read in the data -----------------------------------------------------------
df_csv <- read.csv("./data/RadioReleaseOverview.csv", header = FALSE,
stringsAsFactors = FALSE)
names(df_csv) <- c('model', 'krc', 'release', 'pra')
## clean the data -------------------------------------------------------------
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit()
plot(df2$type)
boxplot(pra ~ type, data = df2)
plot(df2$pra)
plot(df2$type)
boxplot(pra ~ type, data = df2)
boxplot(as.date(pra) ~ type, data = df2)
boxplot(pra ~ type, data = df2)
plot(df2$pra)
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_month = ym(pra))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_month = y(pra))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_month = year(pra))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste(pra_year,pra_month))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
summarise(pra_ym)
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
summarise(count = n(pra_ym))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
summarise(pra_ym = n())
## clean the data -------------------------------------------------------------
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
group_by(pra_ym)
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
group_by(pra_ym) %>%
summarise(count=n())
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = ym(pra_ym))
library(lubridate)
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = ymd(pra_ym))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month)) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = as.Date.POSIXct(pra_ym))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month, '-','01')) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = ymd(pra_ym))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month, '-','01')) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = ymd(pra_ym)) %>%
mutate(cum = cumsum(count))
p1 <- ggplot(df2, aes(x = month, y = count)) +
geom_line()
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line()
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line() +
geom_smooth()
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line() +
geom_smooth() +
ggtitle('Radio releases') + xlab('') + ylab('number of releases')
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line() +
geom_smooth() +
ggtitle('Radio releases') + xlab('') + ylab('number of releases') +
scale_y_continuous(limits = c(0, 200))
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line() +
geom_smooth() +
ggtitle('Radio releases') + xlab('') + ylab('number of releases') +
scale_y_continuous(limits = c(0, 200)) +
geom_bar(aes(y = count))
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line() +
geom_smooth() +
ggtitle('Radio releases') + xlab('') + ylab('number of releases') +
scale_y_continuous(limits = c(0, 200)) +
geom_bar()
p1
p1 <- ggplot(df2, aes(x = month, y = cumsum(count))) +
geom_line() +
geom_smooth() +
ggtitle('Radio releases') + xlab('') + ylab('number of releases') +
scale_y_continuous(limits = c(0, 200)) +
geom_bar(stat = 'bin')
p1
p2 <- ggplot(df2) +
geom_bar(x = month, y = count)
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, y = count))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count, colour="#FF9999"))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count, fill = 'steelblue'))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count, fill = 'lightblue'))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count, fill="#FF9999"))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count, fill="grey"))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count)) +
geom_line(aes(x = month, y = cumsum(count)))
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count)) +
geom_line(aes(x = month, y = cumsum(count))) +
geom_smooth()
p2
p2 <- ggplot(df2) +
geom_bar(aes(x = month, weights = count)) +
geom_line(aes(x = month, y = cumsum(count)))
p2
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month, '-','01')) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = ymd(pra_ym))
df2 <-  df_csv[, c(1,4)] %>%
mutate(pra = mdy(pra)) %>%
mutate(type = ifelse(grepl('^RUS', model), 'RUS',
ifelse(grepl('^RRUS', model), 'RRUS',
ifelse(grepl('^mRRUS', model), 'mRRUS',
ifelse(grepl('AIR', model), 'AIR', 'other'))))) %>%
mutate(type = as.factor(type)) %>%
na.omit() %>%
mutate(pra_year = year(pra)) %>%
mutate(pra_month = month(pra)) %>%
mutate(pra_ym = paste0(pra_year, '-',pra_month, '-','01')) %>%
group_by(pra_ym) %>%
summarise(count=n()) %>%
mutate(month = ymd(pra_ym)) %>%
select(-pra_ym)
plot(df2$month, df2$count)
plot.ts(df2$month, df2$count)
View(df_csv)
setwd("~/Documents/slidify/lean-intro")
